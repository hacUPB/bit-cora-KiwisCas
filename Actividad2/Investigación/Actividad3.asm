(WAITD)
    @KBD
    D=M         // Lee el teclado. D = valor ASCII de la tecla presionada.
    @CLEAR       
    D;JEQ		// Si D == 0, no hay tecla -> salta a CLEAR para borrar pantalla
    @100        
    D=D-A		// D = D - 100 -> compara si es la tecla 'd'
    @DRAW       
    D;JEQ		// Si D == 0, entonces era 'd' -> salta a DRAW para pintar

    @WAITD      
    0;JMP		// Si es otra tecla -> vuelve a empezar y sigue esperando

(CLEAR)
    @SCREEN
    D=A
    @R0
    M=D          // Guarda en R0 la dirección inicial de pantalla (16384)

    @8192
    D=A
    @R1
    M=D          // R1 = 8192 -> cantidad de posiciones a limpiar (pantalla completa)

(CLEAR_LOOP)
    @R1
    D=M
    @WAITD
    D;JEQ        // Si contador llega a 0 -> ya terminó -> volver a esperar

    @R0
    A=M
    M=0          // Borra la celda actual (pone el pixel en negro)

    @R0
    M=M+1        // Avanza a la siguiente dirección de pantalla

    @R1
    M=M-1        // Reduce el contador

    @CLEAR_LOOP
    0;JMP		// Repite el bucle

(DRAW)
	@SCREEN
	D=A
	@R12
	AD=D+M
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@2016 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@7704 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@15900 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@31758 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@31206 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@31759 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@19471 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@1037 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@1561 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@20473 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@28685 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@29262 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@8772 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@8196 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@4104 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@4080 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	@R13
	A=M
	D;JMP

	@WAITD
    0;JMP