// Programa que muestra una imagen si se presiona 'd'
// y borra la pantalla si no se presiona nada

// Inicio del ciclo principal
(LOOP)
    @KBD
    D=M         // Leer el teclado

    @100        // ASCII de 'd'
    D=D-A
    @SHOW
    D;JEQ       // Si D == 0, saltar a mostrar imagen

    @KBD
    D=M
    @0
    D=D-A
    @CLEAR
    D;JEQ       // Si no se presiona nada, borrar pantalla

    @LOOP
    0;JMP       // Volver al inicio del ciclo

// Subrutina para mostrar la imagen
(SHOW)
    @RETURN_SHOW
    D=A
    @R13
    M=D
    @DRAW
    0;JMP

(RETURN_SHOW)
    @LOOP
    0;JMP

// Subrutina para borrar la pantalla
(CLEAR)
    @SCREEN
    D=A
    @R0
    M=D          // R0 almacena la dirección actual de la pantalla

(CLEAR_LOOP)
    @R0
    A=M
    M=0          // Borrar pixel

    @R0
    D=M
    @24576
    D=D-A
    @END_CLEAR
    D;JEQ        // Si llegamos al final de la memoria de pantalla

    @R0
    M=M+1
    @CLEAR_LOOP
    0;JMP

(END_CLEAR)
    @LOOP
    0;JMP

// Subrutina DRAW: tu imagen (copiada aquí directamente)
(DRAW)
@SCREEN
	D=A
	@R12
	AD=D+M
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@2016 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@7704 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@15900 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@31758 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@31206 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@31759 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@19471 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@1037 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@1561 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@20473 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@28685 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@29262 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@8772 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@8196 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@4104 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@4080 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	@R13
	A=M
	D;JMP
