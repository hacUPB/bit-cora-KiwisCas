(WAITD)
    @KBD
    D=M
    @WAITD
    D;JEQ            // Si no hay tecla, seguir esperando

    @R3
    M=D              // Guardar el valor de la tecla presionada en R3

    @R3
    D=M
    @100
    D=D-A
    @DRAW
    D;JEQ            // Si tecla == 'd', ir a dibujar

    @R3
    D=M
    @101
    D=D-A
    @CLEAR
    D;JEQ            // Si tecla == 'e', ir a borrar

    @WAITD
    0;JMP

(CLEAR)
    @SCREEN
    D=A
    @R0
    M=D          // R0 = dirección inicial de pantalla

    @8192
    D=A
    @R1
    M=D          // R1 = número de celdas a borrar

(CLEAR_LOOP)
    @R1
    D=M
    @WAITD
    D;JEQ        // Si ya se borró todo, volver a esperar

    @R0
    A=M
    M=0          // Borrar pixel

    @R0
    M=M+1        // R0++

    @R1
    M=M-1        // R1--

    @CLEAR_LOOP
    0;JMP


(DRAW)
	@SCREEN
	D=A
	@R12
	AD=D+M
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@2016 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@7704 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@15900 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@31758 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@31206 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@31759 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@19471 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@1037 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@1561 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@20473 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@28685 
	D=D+A 
	A=D-A 
	M=A-D 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@29262 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@8772 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@8196 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@4104 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	@4080 
	D=D+A 
	A=D-A 
	M=D-A 
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	D=A 
	@30
	AD=D+A
	M=0
	AD=A+1 
	M=0
	AD=A+1 
	M=0
	@R13
	A=M
	D;JMP

	 @WAITD
    0;JMP